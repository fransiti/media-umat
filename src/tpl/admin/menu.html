{include file="header.html"}{include file="banner.html"}
<div id="page-wrapper">
    <div class="container-fluid">
       <div class="col-md-8"> 
        <div class="row">
            <div class="col-md-12 text-center">
                <h3>Menu</h3>
                <div class="clearfix col-pad-bottom-20"></div>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-12 text-right">
                <a href="#" class="btn btn-primary btn-menu" data-id="" data-menu-id="" data-title="">Baru</a>
            </div>
        </div>
        {foreach $menu as $key=>$val}
        <hr>
        <div class="row">
            <div class="col-md-6">
                {$val['nama']}
            </div>
            <div class="col-md-6 text-right">
                <a href="#" class="btn btn-primary btn-menu" data-id="" data-menu-id="{$val['id']}" data-nama="">Submenu</a>
                <a href="#" class="btn btn-success btn-menu" data-id="{$val['id']}" data-menu-id="{$val['menu_id']}" data-nama="{$val['nama']}">Edit</a>
                {if empty($val['submenu'])}
                <a href="#" class="btn btn-danger btn-delete" data-id="{$val['id']}" data-menu-id="{$val['menu_id']}" data-nama="{$val['nama']}">Hapus</a>
                {/if}
            </div>
            <div class="col-md-12 col-pad-bottom-10"></div>
                {foreach $val['submenu'] as $_key=>$_val}
            <div class="col-md-12">
            <div class="row">
            
            <div class="col-md-6 col-md-offset-1"><span class="glyphicon glyphicon-arrow-right"></span> {$_val['nama']}</div>
            <div class="col-md-6 text-right">
                <a href="#" class="btn btn-success btn-menu" data-id="{$_val['id']}" data-menu-id="{$_val['menu_id']}" data-nama="{$_val['nama']}">Edit</a>
                <a href="#" class="btn btn-danger btn-delete" data-id="{$_val['id']}" data-menu-id="{$val['menu_id']}"  data-nama="{$_val['nama']}">Hapus</a>
            </div>
            </div>        
            </div>
            <div class="col-md-12 col-pad-bottom-10"></div>
                {/foreach}
            </div>
        {/foreach}
    </div>
    <div class="col-md-4">
        {include file="mboard.html"}
    </div>    
    </div>
</div>

<div class="modal fade" id="menu-dialog" tabindex="-1" role="dialog" aria-labelledby="menu-label" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <form name="menu-form" id="menu-form" class="form" role="form" action="{$url}" method="post">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title text-center"  id="menu-label">Menu Baru</h4>
                </div>
                <div class="modal-body form-group">
                    <input type="text" name="nama" id="nama" class="form-control">
                    <input type="hidden" name="id" id="id">
                    <input type="hidden" name="menu_id" id="menu-id">
                    {*
                        {$token} untuk validasi dan mencegah kiriman dobel 
                        -- penting!!!
                    *}
                </div>
                <div class="modal-footer form-group">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary" name="submit" value="submit">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    $(function(){
        $('.btn-menu').click( 
            function(e){
                e.preventDefault();
                var a=$(this).attr('data-id');
                var b=$(this).attr('data-nama');
                var c=$(this).attr('data-menu-id');
                $('#id').val(a);
                $('#menu-id').val(c)
                
                var d='Menu Baru';
                if(a!='') { 
                    d ='Ubah Menu : '+a;
                }
                $('#menu-label').html(d);
                $('#menu-dialog').modal();
            });
    });
</script>
{include file="footer.html"}